# 激光点云数据处理

激光雷达 (LiDAR) 产生的三维点云是自动驾驶感知的重要数据源。点云处理涵盖预处理、3D 目标检测、点云配准与定位等环节，为车辆提供精确的三维环境理解。


## 点云特征

点云是由大量三维坐标点 $(x, y, z)$ 组成的无序集合，每个点还可附带反射强度、时间戳等属性。与图像相比，点云具有以下特点：

- 直接提供三维几何信息，无需深度估计
- 数据稀疏且分布不均匀（近密远疏）
- 无序性：点的排列不固定，不能直接用卷积处理
- 单帧点数通常在 30,000–300,000 之间


## 预处理

原始点云在输入检测网络前需要预处理：

- **地面去除**：使用 RANSAC 平面拟合或基于高度阈值的方法滤除地面点
- **降采样**：体素网格滤波 (Voxel Grid Filter) 将点云划分为固定大小的体素，每个体素保留一个代表点
- **ROI 裁剪**：仅保留感兴趣区域（如车辆前方 80 m 范围）内的点云，减少计算量
- **去噪**：统计离群值滤波 (SOR) 移除孤立噪声点


## 3D 目标检测

### 基于点的方法
- **PointNet / PointNet++**：直接处理原始点集，通过对称函数解决无序性问题
- **Point-RCNN**：两阶段方法，先从点云生成 3D 候选框再精细化

### 基于体素的方法
- **VoxelNet**：将点云体素化后用 3D 卷积提取特征
- **SECOND**：引入稀疏卷积，大幅提升体素方法的效率
- **PointPillars**：将点云编码为竖直柱状体 (Pillar)，再用 2D 卷积处理，速度快

### BEV 融合方法
- **BEVFusion**：将相机和 LiDAR 特征统一投影到鸟瞰视角融合
- **CenterPoint**：基于中心点的 3D 检测与跟踪框架


## 点云配准与定位

点云配准将不同时刻或不同传感器的点云对齐到同一坐标系，是 SLAM (Simultaneous Localization and Mapping, 同步定位与建图) 和定位的基础：

- **ICP (迭代最近点)**：经典配准算法，通过迭代寻找最近点对并最小化距离误差
- **NDT (正态分布变换)**：将参考点云建模为正态分布栅格，配准效率高于 ICP
- **LOAM / LeGO-LOAM**：LiDAR 里程计与建图框架，提取边缘和平面特征进行匹配
- **高精地图匹配**：将实时点云与预建的高精度点云地图对比，实现厘米级定位


## 多传感器融合

点云与图像融合可弥补各自不足：

- **前融合**：将图像特征投影到点云或反之，在特征层面融合
- **后融合**：各传感器独立检测后在目标层面融合
- **跨模态注意力**：利用 Transformer 的注意力机制实现点云与图像的深层交互


## 参考资料

1. C. R. Qi et al. PointNet: Deep Learning on Point Sets for 3D Classification and Segmentation. CVPR, 2017.
2. A. H. Lang et al. PointPillars: Fast Encoders for Object Detection from Point Clouds. CVPR, 2019.
3. J. Zhang and S. Singh. LOAM: Lidar Odometry and Mapping in Real-time. RSS, 2014.
